# 🚀 دليل التشغيل السريع - نظام إدارة المستندات الذكي

## ⚡ البدء السريع:

### 1. تشغيل الخادم الخلفي (Backend):
```bash
cd workers-app
uvicorn app.main:app --reload
```
**أو استخدام VS Code Task:**
- اضغط `Ctrl+Shift+P`
- اختر "Run Task"
- اختر "Run Backend (FastAPI or Python)"

### 2. تشغيل الواجهة الأمامية (Frontend):
```bash
cd frontend
npm run dev
```

### 3. الوصول للنظام:
- **الواجهة الأمامية**: http://localhost:5176
- **API الخلفي**: http://localhost:8000
- **توثيق API**: http://localhost:8000/docs

## 🧪 اختبار النظام:

### اختبار سريع:
```bash
python final_check.py
```

### اختبار شامل:
```bash
python test_document_system.py
```

## 📱 استخدام النظام:

### 1. رفع مستند جديد:
- انتقل إلى صفحة الشركات
- اضغط على زر "المستندات" للشركة
- اضغط "رفع مستند جديد"
- اختر الملف ونوع المستند
- اضغط "رفع"

### 2. عرض المستندات:
- ستظهر جميع المستندات في الجدول
- يمكن عرض التفاصيل والمعلومات المستخرجة

### 3. الإشعارات:
- تظهر إشعارات فورية عند رفع المستندات
- تنبيهات تلقائية قبل انتهاء الصلاحية

## 🛠️ الميزات الرئيسية:

### ✅ مكتمل ويعمل:
- رفع المستندات (PDF, صور)
- استخراج ذكي للمعلومات
- تحليل التواريخ والأرقام
- إشعارات انتهاء الصلاحية
- واجهة مستخدم حديثة
- API متكامل

### 📊 أنواع المستندات المدعومة:
- الرخصة التجارية
- رخصة الاستيراد
- رخصة الإعلان
- رخصة البلدية
- شهادة الضريبة
- تأمين الموظفين
- عقد الإيجار
- رخصة الصحة
- شهادة الجودة
- رخصة البيئة

## 🔧 في حالة المشاكل:

### إعادة تشغيل النظام:
```bash
# إيقاف الخوادم
Ctrl+C

# إعادة تشغيل Backend
uvicorn app.main:app --reload

# إعادة تشغيل Frontend
cd frontend
npm run dev
```

### فحص الحالة:
```bash
python final_check.py
```

## 📞 المساعدة:

### روابط مفيدة:
- **API Documentation**: http://localhost:8000/docs
- **Frontend**: http://localhost:5176
- **Backend Status**: http://localhost:8000

### ملفات مهمة:
- `final_check.py` - فحص النظام
- `test_document_system.py` - اختبار شامل
- `app/main.py` - الخادم الرئيسي
- `frontend/src/components/CompanyDocuments.tsx` - واجهة المستندات

---
**النظام جاهز للاستخدام! 🚀**

## 🚨 معلومات مهمة:

### APIs العامة المتاحة:
- **البيانات الأساسية**: `/workers/public/count` - عدد العمال
- **الإحصائيات العامة**: `/analytics/dashboard/public` - إحصائيات عامة
- **الشركات**: `/companies` - قائمة الشركات
- **أنواع المستندات**: `/company_documents/types` - أنواع المستندات
- **الإشعارات**: `/notifications` - الإشعارات

### مشاكل شائعة والحلول:

#### 1. خطأ 403 (Forbidden):
```
# السبب: تحتاج مصادقة
# الحل: استخدم APIs العامة أو قم بتسجيل الدخول أولاً
```

#### 2. خطأ 401 (Unauthorized):
```
# السبب: انتهت صلاحية الرمز المميز
# الحل: تسجيل دخول جديد
```

#### 3. مشكلة WebSocket:
```
# إذا ظهر خطأ في WebSocket، يمكن تجاهله
# الإشعارات ستعمل بدون مشاكل
```

### 🔧 اختبار سريع:
```bash
# اختبار APIs الواجهة الأمامية
python test_frontend_apis.py

# اختبار النظام كاملاً
python final_check.py

# اختبار تسجيل الدخول والAPI المحمي
python test_login_apis.py
```

### 🎯 حل مشكلة AnalyticsDashboardPage:
تم حل المشكلة بتحديث API endpoint إلى:
```
http://localhost:8000/analytics/dashboard/public
```

### 🔑 بيانات الدخول التجريبية:
```
اسم المستخدم: testuser
كلمة المرور: testpassword123
الدور: admin
```
